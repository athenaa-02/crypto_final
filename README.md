The encryption process works by combining two techniques: AES for encrypting the actual file and RSA for protecting the AES key. First, Bob creates an RSA key pair: the public key is shared, and the private key is kept secret. Alice writes her message and generates a random AES-256 key and an IV. She uses this AES key to encrypt her file, producing a ciphertext that no one can read without the same key. Since the AES key must stay secret, she encrypts it using Bob’s RSA public key. This ensures that only Bob, who owns the matching private key, can recover the AES key.

Alice sends Bob three things: the AES-encrypted file, the RSA-encrypted AES key, and the IV. When Bob receives them, he first decrypts the AES key with his RSA private key. Once he has the key and IV, he decrypts the file and restores the original message. To confirm that the file wasn’t changed, both sides can compare the SHA-256 hash of the original and decrypted versions.

AES and RSA have different roles. AES is fast and designed for encrypting large amounts of data; it uses one shared key for both encryption and decryption. RSA is slower and not suitable for big files, but it’s perfect for securely exchanging keys because it uses a public/private key pair. In a hybrid system like this, AES provides efficient data protection, while RSA ensures that the AES key can be shared safely.
